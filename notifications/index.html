<!DOCTYPE html>
  <html>

  <head>
    <link rel="shortcut icon" type="image/png" href="https://ecc521.github.io/experiments/notifications/favicon.png"/>
  </head>

  <body>
    <script>
      'use strict'
      
      const baseurl = "https://ecc521.github.io/experiments/notifications/";
      
      let permissions = {}
      const getpermissions = async function() {
        //Permissions to check
        let check = ["background-sync", "geolocation", "notifications", "persistent-storage"]
        for (let i=0;i<check.length;i++) {
          permissions[check[i]] = await navigator.permissions.query({name:check[i]})
        }
      }
      
      
      ;(async function() {
        
        getpermissions().then(function(){
          console.log(permissions)
        })
        
        let sw = await navigator.serviceWorker.register(baseurl + "sw.js")

        await Notification.requestPermission()

        let title = 'Simple Title';
        let options = {
          body: 'Simple piece of body text.\nSecond line of body text :)'
        };
        sw.showNotification(title, options);
        }())
      
    </script>
    
    
  </body>
</html>
